def mulmod(a, b, m):
    res = 0
    b = bin(b)[2:]
    for i in range(1, len(b) + 1):
        res += abs(a * int(b[-i]) * 2 ** (i - 1)) % m
    return res % m
